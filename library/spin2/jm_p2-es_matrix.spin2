'' =================================================================================================
''
''   File....... jm_p2-es_matrix.spin2
''   Purpose.... Interface code for P2-ES Maxtix (8 x 7 LEDs) accessory           
''   Author..... Jon "JonnyMac" McPhalen
''               Copyright (c) 2020 Jon McPhalen
''               -- see below for terms of use
''   E-mail..... jon.mcphalen@gmail.com
''   Started....
''   Updated.... 28 JUN 2020
''
'' =================================================================================================


con { fixed io pins }

  RX1      = 63  { I }                                          ' programming / debug
  TX1      = 62  { O }                                           
                                                                 
  FS_CS    = 61  { O }                                          ' flash storage
  FS_SCLK  = 60  { O }                                           
  FS_MOSI  = 59  { O }                                           
  FS_MISO  = 58  { I }                                           
                                                                 

con

  ROWS = 7                                                      ' display size
  COLS = 8

  C_CHARS = 8                                                   ' # custom chars (31 MAX!)

  #0, M_OFF, M_ON, M_XOR                                        ' pixel modes 

  
var

  long  cog                                                     ' charlieplex cog id
  long  stack[32]                                               ' stack space for Spin cog

  byte  pixels[7]                                               ' internal map

  
pub null()

'' This is not a top-level object


pub start(basepin) : result

'' Start matrix charlieplexing cog
'' -- basepin is start of IO pin group
'' -- p_buf is pointer to LED data (array of bytes)

  stop()                                                        ' stop if running

  longfill(@Custom, @Space, C_CHARS)                            ' clear custom char pointers

  cog := cogspin(NEWCOG, refresh_display(basepin), @stack) + 1  ' start matrix cog

  return cog


pub stop()

'' Stop matrix charlieplexing cog

  if (cog)                                                      ' running?
    cogstop(cog - 1)                                            '  yes, stop cog
    cog := 0                                                    '  mark stopped


pub clear()

'' Clears matrix

  bytefill(@pixels, 0, ROWS)


pub putc(c)  

'' Write ASCII character c to matrix

  c := char_addr(c)                                             ' convert to map address
  if (c > 0)                                                    ' if valid
    buf_copy(c)                                                 '   update display 


pub buf_copy(p_buf)

'' Copy pixel buffer at p_buf into display
'' -- use to display non

  bytemove(@pixels, p_buf, ROWS)
    

pub scroll(p_str, ms) | len, c1, c2, ofs

'' Scroll string through matrix
'' -- p_str is pointer to string
'' -- ms is column delay in milliseconds
''    * affects speed

  putc(byte[p_str])                                     ' first char w/o offset
  waitms(ms)

  repeat strsize(p_str)-1                               ' leave last char in display
    c1 := byte[p_str][0]                                ' current character
    c2 := byte[p_str][1]                                ' next character
    repeat ofs from 1 to COLS                           ' blend
      blend_chars(c1, c2, ofs)
      waitms(ms)
    ++p_str                                             ' move to next pair

    
pub blend_chars(c1, c2, ofs) | p_c1, p_c2, r, byte tbuf[ROWS]

'' Blend right side c1 and left side of c2 in display
'' -- used to support string scrolling
'' -- ofs controls blending
''    * 0 = only c1
''    * 8 = only c2
''    * other values mix character
      
  if (ofs <= 0)
    putc(c1)

  elseif (ofs >= COLS)
    putc(c2)
 
  else
    p_c1 := char_addr(c1)
    p_c2 := char_addr(c2) 
    repeat r from 0 to ROWS-1
      tbuf[r] := (byte[p_c1][r] << ofs) | (byte[p_c2][r] >> (COLS-ofs))   
    bytemove(@pixels, @tbuf, ROWS)

  
pub set_custom(n, p_map)

'' Set map to custom characters
'' -- n is 1 to C_CHARS
'' -- p_map is pointer to custom character map
''    * array of 7 bytes
'' -- custom char indexes (1..8) may used with putc() or embedded in strings

  if ((n >= 1) && (n <= C_CHARS))                       ' valid custom char id?
    Custom[n-1] := p_map                                ' yes, save map address               


pub plot(x, y, mode) | mask

'' Plot pixel at location x, y
'' -- x is column, 0 is leftmost
'' -- y is row, 0 is top
'' -- mode 0 for off, 1 for on, 2 for reverse

  if ((x >= 0) && (x < COLS))                           ' both coordinates in bounds?
    if ((y >= 0) && (y < ROWS))
      mask := %10000000 >> x                            ' create mask for column
      case mode
        M_OFF : pixels[y] &= !mask
        M_ON  : pixels[y] |= mask
        M_XOR : pixels[y] ^= mask


pub line(x0, y0, x1, y1, mode) | dx, sx, dy, sy, err, e2

'' Draw line from x0/y0 to x1/y1 
'' -- mode 0 for off, 1 for on, 2 for reverse

  dx  := abs(x1 - x0)
  sx  := (x0 < x1) ? 1 : -1
  dy  := -abs(y1 - y0)
  sy  := (y0 < y1) ? 1 : -1
  err := dx + dy
  repeat
    plot(x0, y0, mode)
    if (x0 == x1) && (y0 == y1)
      quit
    e2 := err << 1
    if (e2 >= dy)
      err += dy
      x0 += sx
    if (e2 <= dx)
      err += dx
      y0 += sy


pub dot(col, level)

'' Draws dot at level (from bottom)
'' -- col is display column to update
'' -- level is 0 (blank), or 1..7

  if ((col >= 0) && (col < COLS))
    level := 0 #> level <# ROWS
    line(col, 0, col, ROWS-1, M_OFF)                            ' clear column       
    if (level > 0)
      plot(col, ROWS-level, M_ON)                               ' plot level 

      
pub bar(col, level)

'' Draws bar from bottom up to level
'' -- col is display column to update
'' -- level is 0 (blank), or 1..7

  if ((col >= 0) && (col < COLS))
    level := 0 #> level <# ROWS
    if (level == 0)
      line(col, 0, col, ROWS-1, M_OFF)
    elseif (level == ROWS)
      line(col, 0, col, ROWS-1, M_ON)   
    else
      line(col, 0, col, ROWS-level-1, M_OFF)
      line(col, ROWS-level, col, ROWS-1, M_ON)  


pub shift_display(n) | r

'' Shifts display n pixels
'' -- n is displacement, -8 (to left) to 8 (to right)

  n := -8 #> n <# 8
  if (n < 0)
    n := -n
    repeat r from 0 to ROWS-1
      pixels[r] <<= n
  else
    repeat r from 0 to ROWS-1
      pixels[r] >>= n     


pri refresh_display(basepin) | pinfield, tix, a, k, t, r, bits

'' Refresh 8x7 LED matrix (low power -- one LED at a time)
'' -- basepin is first pin of group used

  pinfield := basepin addpins 7                                 ' io group used

  tix := (clkfreq / 120) / 56                                   ' refresh @ ~120Hz

  repeat
    a := 0                                                      ' initial anode offset
    k := 1                                                      ' initial cathode offset
    t := getct()                                                ' start pixel timing     
    repeat r from 0 to ROWS-1                                   ' process rows (top->bottom)
      bits := pixels[r]                                         ' get row bits
      repeat COLS                                               ' process columns (left->right)
        if (bits & %10000000)                                   ' active?                                          
          pinhigh(basepin + a)                                  ' pixel on
          pinlow(basepin + k)
        bits <<= 1                                              ' prep for next column
        if (++k == 8)                                           ' if last cathode pin
          ++a                                                   '  inc anode pin
          k := 0                                                '  reset cathode
        if (k == a)                                             ' if cathode == anode
          ++k                                                   '  use next pin
        waitct(t += tix)                                        ' hold    
        pinfloat(pinfield)                                      ' pixel off
           

pub char_addr(c) : addr

'' Returns address of map for character c
'' -- returns 0 if invalid

  case c
    01..C_CHARS : addr := Custom[c-1]                           ' custom character
    32..127     : addr := @Ascii + ((c-32) * ROWS)              ' ASCII character
    other       : addr := -1                                    ' bad character
                                                   

dat { character maps }

'' Custom characters are mapped, 1..n, with 31 being the highest allowable n. Using 1..n
'' indexing allows the character ID to be inserted into strings.

  Custom        long    -1[C_CHARS]                             ' pointers to custom maps


'' Format:
'' -- bytes are arranged top-to-bottom (byte0 is top row)
'' -- row bytes are arraged left-to-right (bit7 is leftmost column)
'' -- character maps are identical to those in common 5x7 LCDs
''    * lowercase letters not recommended 

  Ascii         byte
  
  Space         byte    %00000000                               ' space
                byte    %00000000 
                byte    %00000000 
                byte    %00000000 
                byte    %00000000
                byte    %00000000
                byte    %00000000

                byte    %00001000                               ' ! 
                byte    %00001000
                byte    %00001000
                byte    %00001000
                byte    %00001000 
                byte    %00000000
                byte    %00001000

                byte    %00010100                               ' " (quote)
                byte    %00010100
                byte    %00010100
                byte    %00000000
                byte    %00000000 
                byte    %00000000
                byte    %00000000

                byte    %00010100                               ' # 
                byte    %00010100
                byte    %00111110
                byte    %00010100
                byte    %00111110 
                byte    %00010100
                byte    %00010100

                byte    %00001000                               ' $
                byte    %00011110                                
                byte    %00101000                                
                byte    %00011100                                
                byte    %00001010                                
                byte    %00111100                                
                byte    %00001000                                
                                                                 
                byte    %00110000                               ' %
                byte    %00110010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00100110                                
                byte    %00000110                                
                                                                 
                byte    %00011000                               ' & 
                byte    %00100100                                
                byte    %00101000                                
                byte    %00010000
                byte    %00101010 
                byte    %00100100
                byte    %00011010

                byte    %00011000                               ' (apostrophe) 
                byte    %00001000                                
                byte    %00010000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                                                                 
                byte    %00000100                               ' (
                byte    %00001000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00001000                                
                byte    %00000100                                
                                                                 
                byte    %00010000                               ' )
                byte    %00001000                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000

                byte    %00000000                               ' *
                byte    %00001000                                
                byte    %00101010                                
                byte    %00011100                                
                byte    %00101010                                
                byte    %00001000                                
                byte    %00000000                                
                                                                 
                byte    %00000000                               ' +
                byte    %00001000                                
                byte    %00001000                                
                byte    %00111110                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00000000                                
                                                                 
                byte    %00000000                               ' , (comma) 
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00011000 
                byte    %00001000
                byte    %00010000
                                     
                byte    %00000000                               ' -
                byte    %00000000                                
                byte    %00000000                                
                byte    %00111110                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                                                                 
                byte    %00000000                               ' . (period)
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00011000                                
                byte    %00011000                                
                                                                 
                byte    %00000000                               ' /
                byte    %00000010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00100000
                byte    %00000000

  Digits        byte    %00011100                               ' 0
                byte    %00100010                                
                byte    %00100110                                
                byte    %00101010                                
                byte    %00110010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00001000                               ' 1
                byte    %00011000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00011100                                
                                                                 
                byte    %00011100                               ' 2
                byte    %00100010                                
                byte    %00000010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00111110                                
                                                                 
                byte    %00111110                               ' 3
                byte    %00000100                                
                byte    %00001000                                
                byte    %00000100                                
                byte    %00000010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00000100                               ' 4
                byte    %00001100                                
                byte    %00010100                                
                byte    %00100100                                
                byte    %00111110                                
                byte    %00000100                                
                byte    %00000100                                
                                                                 
                byte    %00111110                               ' 5
                byte    %00100000                                
                byte    %00111100                                
                byte    %00000010                                
                byte    %00000010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00001100                               ' 6
                byte    %00010000                                
                byte    %00100000                                
                byte    %00111100                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00111110                               ' 7
                byte    %00000010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010000                                
                                                                 
                byte    %00011100                               ' 8
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00011100                               ' 9
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011110                                
                byte    %00000010                                
                byte    %00000100                                
                byte    %00011000                                
                                                                 
                byte    %00000000                               ' : 
                byte    %00011000                                
                byte    %00011000                                
                byte    %00000000                                
                byte    %00011000                                
                byte    %00011000                                
                byte    %00000000                                
                                                                 
                byte    %00000000                               ' ;
                byte    %00011000                                
                byte    %00011000                                
                byte    %00000000                                
                byte    %00011000                                
                byte    %00001000                                
                byte    %00010000                                
                                                                 
                byte    %00000100                               ' <
                byte    %00001000                                
                byte    %00010000                                
                byte    %00100000                                
                byte    %00010000                                
                byte    %00001000                                
                byte    %00000100                                
                                                                 
                byte    %00000000                               ' =
                byte    %00000000                                
                byte    %00111110                                
                byte    %00000000                                
                byte    %00111110                                
                byte    %00000000                                
                byte    %00000000                                
                                                                 
                byte    %00010000                               ' >
                byte    %00001000                                
                byte    %00000100                                
                byte    %00000010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                                                                 
                byte    %00011100                               ' ?
                byte    %00100010                                
                byte    %00000010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00000000                                
                byte    %00001000                                
                                                                 
                byte    %00011100                               ' @
                byte    %00100010                                
                byte    %00000010                                
                byte    %00001010                                
                byte    %00101010                                
                byte    %00101010                                
                byte    %00011100                                
                                                                 
  Alphas        byte    %00011100                               ' A
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111110                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00111100                               ' B
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111100                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111100                                
                                                                 
                byte    %00011100                               ' C
                byte    %00100010                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00111000                               ' D
                byte    %00100100                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100100                                
                byte    %00111000                                
                                                                 
                byte    %00111110                               ' E
                byte    %00100000                                
                byte    %00100000                                
                byte    %00111100                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00111110                                
                                                                 
                byte    %00111110                               ' F
                byte    %00100000                                
                byte    %00100000                                
                byte    %00111100                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                                                                 
                byte    %00011100                               ' G
                byte    %00100010                                
                byte    %00100000                                
                byte    %00101110                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00100010                               ' H
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111110                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00011100                               ' I
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00011100                                
                                                                 
                byte    %00001110                               ' J
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00100100                                
                byte    %00011000                                
                                                                 
                byte    %00100010                               ' K
                byte    %00100100                                
                byte    %00101000                                
                byte    %00110000                                
                byte    %00101000                                
                byte    %00100100                                
                byte    %00100010                                
                                                                 
                byte    %00100000                               ' L 
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00111110                                
                                                                 
                byte    %00100010                               ' M
                byte    %00110110                                
                byte    %00101010                                
                byte    %00101010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00100010                               ' N
                byte    %00100010                                
                byte    %00110010                                
                byte    %00101010                                
                byte    %00100110                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00011100                               ' O
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00111100                               ' P
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111100                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                                                                 
                byte    %00011100                               ' Q
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00101010                                
                byte    %00100100                                
                byte    %00011010                                
                                                                 
                byte    %00111100                               ' R
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111100                                
                byte    %00101000                                
                byte    %00100100                                
                byte    %00100010                                
                                                                 
                byte    %00011110                               ' S
                byte    %00100000                                
                byte    %00100000                                
                byte    %00011100                                
                byte    %00000010                                
                byte    %00000010                                
                byte    %00111100                                
                                                                 
                byte    %00111110                               ' T
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                                                                 
                byte    %00100010                               ' U
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00100010                               ' V
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00010100                                
                byte    %00001000                                
                                                                 
                byte    %00100010                               ' W
                byte    %00100010                                
                byte    %00100010                                
                byte    %00101010                                
                byte    %00101010                                
                byte    %00101010                                
                byte    %00010100                                
                                                                 
                byte    %00100010                               ' X
                byte    %00100010                                
                byte    %00010100                                
                byte    %00001000                                
                byte    %00010100                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00100010                               ' Y
                byte    %00100010                                
                byte    %00100010                                
                byte    %00010100                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                                                                 
                byte    %00111110                               ' Z
                byte    %00000010                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00100000                                
                byte    %00111110                                
                                                                 
                byte    %00011100                               ' [ 
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00011100                                
                                                                 
                byte    %00000000                               ' \ 
                byte    %00100000                                
                byte    %00010000                                
                byte    %00001000                                
                byte    %00000100                                
                byte    %00000010                                
                byte    %00000000                                
                                                                 
                byte    %00011100                               ' ]
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00011100                                
                                                                 
                byte    %00001000                               ' ^
                byte    %00010100                                
                byte    %00100010                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                                                                 
                byte    %00000000                               ' _
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00111110                                
                                                                 
                byte    %00010000                               ' `
                byte    %00001000                                
                byte    %00000100                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                byte    %00000000                                
                                                                 
' Note : There is no space for descenders so many lowercase
'        alphas are not visually pleasing.
                
                byte    %00000000                               ' a
                byte    %00000000                                
                byte    %00011100                                
                byte    %00000010                                
                byte    %00011110                                
                byte    %00100010                                
                byte    %00011110                                
                                                                 
                byte    %00100000                               ' b
                byte    %00100000                                
                byte    %00101100                                
                byte    %00110010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00111100                                
                                                                 
                byte    %00000000                               ' c
                byte    %00000000                                
                byte    %00011100                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00000010                               ' d 
                byte    %00000010                                
                byte    %00011010                                
                byte    %00100110                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011110                                
                                                                 
                byte    %00000000                               ' e
                byte    %00000000                                
                byte    %00011100                                
                byte    %00100010                                
                byte    %00111110                                
                byte    %00100000                                
                byte    %00011100                                
                                                                 
                byte    %00001100                               ' f
                byte    %00010010                                
                byte    %00010000                                
                byte    %00111000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010000                                
                                                                 
                byte    %00000000                               ' g 
                byte    %00011110                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011110                                
                byte    %00000010                                
                byte    %00011100                                
                                                                 
                byte    %00100000                               ' h
                byte    %00100000                                
                byte    %00101100                                
                byte    %00110010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00001000                               ' i
                byte    %00000000                                
                byte    %00011000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00011100                                
                                                                 
                byte    %00000100                               ' j
                byte    %00000000                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00000100                                
                byte    %00100100                                
                byte    %00011000                                
                                                                 
                byte    %00100000                               ' k
                byte    %00100000                                
                byte    %00100100                                
                byte    %00101000                                
                byte    %00110000                                
                byte    %00101000                                
                byte    %00100100                                
                                                                 
                byte    %00011000                               ' l
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00011100                                
                                                                 
                byte    %00000000                               ' m
                byte    %00000000                                
                byte    %00110100                                
                byte    %00101010                                
                byte    %00101010                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00000000                               ' n
                byte    %00000000                                
                byte    %00101100                                
                byte    %00110010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                                                                 
                byte    %00000000                               ' o 
                byte    %00000000                                
                byte    %00011100                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011100                                
                                                                 
                byte    %00000000                               ' p
                byte    %00000000                                
                byte    %00111100                                
                byte    %00100010                                
                byte    %00111100                                
                byte    %00100000                                
                byte    %00100000                                
                                                                 
                byte    %00000000                               ' q
                byte    %00000000                                
                byte    %00011010                                
                byte    %00100110                                
                byte    %00011110                                
                byte    %00000010                                
                byte    %00000010                                
                                                                 
                byte    %00000000                               'r
                byte    %00000000                                
                byte    %00101100                                
                byte    %00110010                                
                byte    %00100000                                
                byte    %00100000                                
                byte    %00100000                                
                                                                 
                byte    %00000000                               ' s
                byte    %00000000                                
                byte    %00011100                                
                byte    %00100000                                
                byte    %00011100                                
                byte    %00000010                                
                byte    %00111100                                
                                                                 
                byte    %00010000                               ' t
                byte    %00010000                                
                byte    %00111000                                
                byte    %00010000                                
                byte    %00010000                                
                byte    %00010010                                
                byte    %00001100                                
                                                                 
                byte    %00000000                               ' u                   
                byte    %00000000                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100110                                
                byte    %00011010                                
                                                                 
                byte    %00000000                               ' v 
                byte    %00000000                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00010100                                
                byte    %00001000                                
                                                                 
                byte    %00000000                               ' w
                byte    %00000000                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00101010                                
                byte    %00101010                                
                byte    %00010100                                
                                                                 
                byte    %00000000                               ' x
                byte    %00000000                                
                byte    %00100010                                
                byte    %00010100                                
                byte    %00001000                                
                byte    %00010100                                
                byte    %00100010                                
                                                                 
                byte    %00000000                               ' y
                byte    %00000000                                
                byte    %00100010                                
                byte    %00100010                                
                byte    %00011110                                
                byte    %00000010                                
                byte    %00011100                                
                                                                 
                byte    %00000000                               ' z
                byte    %00000000                                
                byte    %00111110                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00111110                                
                                                                 
                byte    %00000100                               ' {
                byte    %00001000                                
                byte    %00001000                                
                byte    %00010000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00000100                                
                                                                 
                byte    %00001000                               ' |
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00001000                                
                                                                 
                byte    %00010000                               ' }
                byte    %00001000                                
                byte    %00001000                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00001000                                
                byte    %00010000                                
                                                                 
                byte    %00000000                               ' right arrow replaces ~
                byte    %00001000                                
                byte    %00000100                                
                byte    %00111110                                
                byte    %00000100                                
                byte    %00001000                                
                byte    %00000000                                
                                                                 
                byte    %00000000                               ' left arrow replaces DEL
                byte    %00001000                                
                byte    %00010000                                
                byte    %00111110                                
                byte    %00010000                                
                byte    %00001000                                
                byte    %00000000                                
                                                                 

con { license } 
                
{{              

  Terms of Use: MIT License

  Permission is hereby granted, free of charge, to any person obtaining a copy of this
  software and associated documentation files (the "Software"), to deal in the Software
  without restriction, including without limitation the rights to use, copy, modify,
  merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
  permit persons to whom the Software is furnished to do so, subject to the following
  conditions:

  The above copyright notice and this permission notice shall be included in all copies
  or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
  PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
  CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE
  OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

}}